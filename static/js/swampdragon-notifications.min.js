!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.notifications=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){t.exports=e("./src/swampdragon-notifications")},{"./src/swampdragon-notifications":3}],2:[function(e,t,n){function i(){Notification.requestPermission(function(e){r=e==="granted"})}function s(){r=!1}function o(e,t,n){if(r===!1)return;if(window.Notification&&Notification.permission==="granted"){var i=new Notification(e,t);n&&(i.onclick=n)}}var r=!1;t.exports={enableDesktopNotifications:i,disableDesktopNotifications:s,showDesktopNotification:o}},{}],3:[function(e,t,n){function o(e){swampdragon.ready(function(){swampdragon.callRouter("get_online_count","swampdragon-online",{},function(t,n){e(n.online)})})}function u(e,t){swampdragon.ready(function(){swampdragon.callRouter("mark_read","swampdragon-notifications",{notification_id:e.id},function(n,r){t(e)})})}function a(e){s.push(e)}function f(e){i.push(e)}var r=e("./desktop-notifications"),i=[],s=[];swampdragon.open(function(){swampdragon.subscribe("swampdragon-notifications","notifications",{},function(){}),swampdragon.subscribe("swampdragon-online","users-online",{},function(){})}),swampdragon.onChannelMessage(function(e,t,n){var r=null;for(var o=0;o<e.length;o+=1){r=e[o];if(r==="users-online")for(var u=0;u<i.length;u+=1)i[u](t.data.users_online);if(r==="notifications")for(var u=0;u<s.length;u+=1)s[u](t.data)}}),t.exports={onlineCount:o,onlineCountChange:f,onNotification:a,enableDesktopNotifications:r.enableDesktopNotifications,disableDesktopNotifications:r.disableDesktopNotifications,desktopNotification:r.showDesktopNotification,markAsRead:u}},{"./desktop-notifications":2}]},{},[1])(1)});
